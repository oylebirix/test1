"use strict";(self.webpackChunknobleui_angular=self.webpackChunknobleui_angular||[]).push([[224],{8224:(R,_,l)=>{l.r(_),l.d(_,{GiftModule:()=>Q});var m=l(9808),d=l(3492),b=l(5861),e=l(5e3),c=l(2340),g=l(603),A=l(520),f=l(2290);let h=(()=>{class n{constructor(t,i){this.http=t,this.toastr=i}getGift(t,i){const o={"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token"),"Access-Control-Allow-Origin":"*"};this.http.get(c.N.BASE_URL+"/get-gift",{headers:o,params:t}).subscribe(a=>{i(a)},a=>{(new g.h).checkError(a,this.toastr)})}getFilterList(t,i){const o={"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token"),"Access-Control-Allow-Origin":"*"};this.http.get(c.N.BASE_URL+"/gifts/filter-list",{headers:o,params:t}).subscribe(a=>{i(a)},a=>{(new g.h).checkError(a,this.toastr)})}getGiftList(t,i){const o={"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token"),"Access-Control-Allow-Origin":"*"};this.http.get(c.N.BASE_URL+"/gifts",{headers:o,params:t}).subscribe(a=>{i(a)},a=>{(new g.h).checkError(a,this.toastr)})}getEdit(t,i){const o={"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token"),"Access-Control-Allow-Origin":"*"};this.http.get(c.N.BASE_URL+"/gifts/edit-get",{headers:o,params:t}).subscribe(a=>{i(a)},a=>{(new g.h).checkError(a,this.toastr)})}getGiftPage(t,i){const o={"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token"),"Access-Control-Allow-Origin":"*"};this.http.get(c.N.BASE_URL+"/gifts-page",{headers:o,params:t}).subscribe(a=>{i(a)},a=>{(new g.h).checkError(a,this.toastr)})}add(t,i){this.http.post(c.N.BASE_URL+"/add-gift",t,{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*",Authorization:"Bearer "+localStorage.getItem("token")}}).subscribe(o=>{i(o)},o=>{(new g.h).checkError(o,this.toastr)})}update(t,i){this.http.put(c.N.BASE_URL+"/update-gift",t,{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*",Authorization:"Bearer "+localStorage.getItem("token")}}).subscribe(o=>{i(o)},o=>{(new g.h).checkError(o,this.toastr)})}toogle(t,i){this.http.put(c.N.BASE_URL+"/gifts/toggle/active",t,{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*",Authorization:"Bearer "+localStorage.getItem("token")}}).subscribe(o=>{i(o)},o=>{(new g.h).checkError(o,this.toastr)})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(A.eN),e.LFG(f._W))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var v=l(9534),u=l(1238),s=l(2382);function y(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return o.newGift=!o.newGift,o.gift={}}),e._UZ(1,"i",20),e._uU(2," Yeni Hediye Ekleyin "),e.qZA()}}const x=function(){return["../list"]};let w=(()=>{class n{constructor(t,i,o){this.giftService=t,this.fuService=i,this.toastr=o,this.gift={},this.newGift=!1}ngOnInit(){}add(){var t=this;return(0,b.Z)(function*(){t.gift.image=yield t.uploadImage(),t.giftService.add(t.gift,i=>{i&&(t.newGift=!0,t.toastr.success("Hediye Ekleme Ba\u015far\u0131l\u0131"))})})()}imageChanged(t){this.image=t.target.files}uploadImage(){return new Promise((t,i)=>{this.fuService.upload(this.image,{module:"image"},o=>{var a;(null===(a=null==o?void 0:o.urls)||void 0===a?void 0:a.length)?t(o.urls[0].url):i(null)})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h),e.Y36(v.J),e.Y36(f._W))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-create"]],decls:31,vars:6,consts:[[1,"d-flex","justify-content-between","align-items-center","flex-wrap","grid-margin"],[1,"mb-3","mb-md-0"],["placement","bottom","ngbTooltip","Geri D\xf6n",1,"btn","btn-link","btn-icon",3,"routerLink"],[1,"feather","icon-arrow-left"],[1,"card","grid-margin"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-md-6","col-sm-12"],[1,"form-group","mb-3"],[1,"form-label"],["type","text","placeholder","\u0130sim","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","placeholder","Miktar","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-12","col-sm-12"],["type","file","accept","image/*",1,"form-control",3,"change"],[1,"card-footer","d-flex","gap-2"],["type","submit",1,"btn","btn-success","btn-icon-text",3,"disabled","click"],[1,"btn-icon-prepend","feather","icon-save"],["type","button","class","btn btn-primary btn-icon-text",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary","btn-icon-text",3,"click"],[1,"btn-icon-prepend","feather","icon-plus"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div")(2,"h4",1)(3,"a",2),e._UZ(4,"i",3),e.qZA(),e._uU(5," Hediyeler "),e.qZA()()(),e.TgZ(6,"div",4)(7,"div",5),e._uU(8,"Hediye Ekle"),e.qZA(),e.TgZ(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9)(13,"label",10),e._uU(14,"\u0130sim"),e.qZA(),e.TgZ(15,"input",11),e.NdJ("ngModelChange",function(a){return i.gift.name=a}),e.qZA()()(),e.TgZ(16,"div",8)(17,"div",9)(18,"label",10),e._uU(19,"Jeton"),e.qZA(),e.TgZ(20,"input",12),e.NdJ("ngModelChange",function(a){return i.gift.value=a}),e.qZA()()(),e.TgZ(21,"div",13)(22,"div",9)(23,"label",10),e._uU(24,"Hediye Resmi"),e.qZA(),e.TgZ(25,"input",14),e.NdJ("change",function(a){return i.imageChanged(a)}),e.qZA()()()()(),e.TgZ(26,"div",15)(27,"button",16),e.NdJ("click",function(){return i.add()}),e._UZ(28,"i",17),e._uU(29," Kaydet "),e.qZA(),e.YNc(30,y,3,0,"button",18),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("routerLink",e.DdM(5,x)),e.xp6(12),e.Q6J("ngModel",i.gift.name),e.xp6(5),e.Q6J("ngModel",i.gift.value),e.xp6(7),e.Q6J("disabled",i.newGift),e.xp6(3),e.Q6J("ngIf",i.newGift))},directives:[d.yS,u._L,s.Fj,s.Q7,s.JJ,s.On,s.wV,m.O5],styles:[""]}),n})(),L=(()=>{class n{constructor(t,i,o,a){this.giftService=t,this.fuService=i,this.toastr=o,this.route=a,this.gift={},this.newGift=!1}ngOnInit(){this.route.params.subscribe(t=>{this.routeId=t.id||0,this.getGift()})}getGift(){this.giftService.getGift({_id:this.routeId},t=>{this.gift=t})}update(){var t=this;return(0,b.Z)(function*(){t.newGift=!0,t.image&&(t.gift.image=yield t.uploadImage()),t.giftService.update(t.gift,i=>{i&&(t.toastr.success("Hediye G\xfcncelleme Ba\u015far\u0131l\u0131"),t.getGift(),t.newGift=!1)})})()}imageChanged(t){this.image=t.target.files}uploadImage(){return new Promise((t,i)=>{this.fuService.upload(this.image,{module:"image"},o=>{var a;(null===(a=null==o?void 0:o.urls)||void 0===a?void 0:a.length)?t(o.urls[0].url):i(null)})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h),e.Y36(v.J),e.Y36(f._W),e.Y36(d.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-edit"]],decls:33,vars:4,consts:[[1,"d-flex","justify-content-between","align-items-center","flex-wrap","grid-margin"],[1,"mb-3","mb-md-0"],[1,"card","grid-margin"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-md-6","col-sm-12"],[1,"form-group","mb-3"],[1,"form-label"],["type","text","placeholder","Ad","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Miktar","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-12","col-sm-12"],["type","file","accept","image/*",1,"form-control",3,"change"],[1,"btn","btn-light",3,"click"],[2,"width","75px","height","75px","object-fit","contain",3,"src"],[1,"feather","icon-x"],[1,"card-footer","d-flex","gap-2"],["type","submit",1,"btn","btn-success","btn-icon-text",3,"disabled","click"],[1,"btn-icon-prepend","feather","icon-save"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div")(2,"h4",1),e._uU(3," Hediyeler "),e.qZA()()(),e.TgZ(4,"div",2)(5,"div",3),e._uU(6,"Hediye D\xfczenle"),e.qZA(),e.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7)(11,"label",8),e._uU(12,"\u0130sim"),e.qZA(),e.TgZ(13,"input",9),e.NdJ("ngModelChange",function(a){return i.gift.name=a}),e.qZA()()(),e.TgZ(14,"div",6)(15,"div",7)(16,"label",8),e._uU(17,"Jeton"),e.qZA(),e.TgZ(18,"input",10),e.NdJ("ngModelChange",function(a){return i.gift.value=a}),e.qZA()()(),e.TgZ(19,"div",11)(20,"div",7)(21,"label",8),e._uU(22,"Hediye Resmi"),e.qZA(),e.TgZ(23,"input",12),e.NdJ("change",function(a){return i.imageChanged(a)}),e.qZA()(),e.TgZ(24,"button",13),e.NdJ("click",function(){return i.gift.image=null}),e._UZ(25,"img",14)(26,"br")(27,"i",15),e._uU(28," Kald\u0131r "),e.qZA()()()(),e.TgZ(29,"div",16)(30,"button",17),e.NdJ("click",function(){return i.update()}),e._UZ(31,"i",18),e._uU(32," Kaydet "),e.qZA()()()),2&t&&(e.xp6(13),e.Q6J("ngModel",i.gift.name),e.xp6(5),e.Q6J("ngModel",i.gift.value),e.xp6(7),e.Q6J("src",i.gift.image,e.LSH),e.xp6(5),e.Q6J("disabled",i.newGift))},directives:[s.Fj,s.Q7,s.JJ,s.On],styles:[""]}),n})();var U=l(2182),S=l(5226),Z=l.n(S),J=l(4045),p=l(6166);function N(n,r){1&n&&(e.TgZ(0,"span"),e._uU(1,"#"),e.qZA())}function k(n,r){if(1&n&&(e.TgZ(0,"b"),e._uU(1),e.qZA()),2&n){const t=r.rowIndex,i=e.oxw();e.xp6(1),e.Oqu(t+1*i.page.pageNumber)}}function q(n,r){1&n&&(e.TgZ(0,"span"),e._uU(1,"Resim"),e.qZA())}function E(n,r){1&n&&e._UZ(0,"img",22),2&n&&e.Q6J("src",r.value,e.LSH)}function G(n,r){1&n&&(e.TgZ(0,"span"),e._uU(1,"\u0130sim"),e.qZA())}function M(n,r){1&n&&e._uU(0),2&n&&e.hij(" ",r.value," ")}function z(n,r){1&n&&(e.TgZ(0,"span"),e._uU(1,"Jeton"),e.qZA())}function B(n,r){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const t=r.value;e.xp6(1),e.Oqu(t)}}function H(n,r){1&n&&(e.TgZ(0,"span"),e._uU(1,"\u0130\u015flem"),e.qZA())}const C=function(n){return["/gift/edit",n]};function I(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"a",23)(1,"span",24),e._UZ(2,"i",25),e.qZA()(),e.TgZ(3,"button",26),e.NdJ("click",function(){const a=e.CHM(t).row;return e.oxw().delete(a._id)}),e.TgZ(4,"span",24),e._UZ(5,"i",27),e.qZA()()}2&n&&e.Q6J("routerLink",e.VKq(1,C,r.row._id))}function Y(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",28)(1,"div",29)(2,"div",6)(3,"div",18)(4,"div",30),e._UZ(5,"img",31),e.qZA(),e.TgZ(6,"div",32)(7,"b",33),e._uU(8),e.qZA(),e.TgZ(9,"ul",34)(10,"li",35)(11,"span"),e._uU(12,"Jeton"),e.qZA(),e.TgZ(13,"b"),e._uU(14),e.qZA()()()()()(),e.TgZ(15,"div",36)(16,"a",23)(17,"span",24),e._UZ(18,"i",25),e.qZA()(),e.TgZ(19,"button",26),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().delete(a._id)}),e.TgZ(20,"span",24),e._UZ(21,"i",27),e.qZA()()()()()}if(2&n){const t=r.$implicit;e.xp6(5),e.Q6J("src",t.image,e.LSH)("alt",t.name),e.xp6(3),e.hij(" ",t.name," "),e.xp6(6),e.Oqu(t.coins),e.xp6(2),e.Q6J("routerLink",e.VKq(5,C,t._id))}}const O=function(){return["./create"]};let T=(()=>{class n{constructor(t,i){this.giftService=t,this.userService=i,this.page=new U.T,this.data=[],this.isLoading=!1,this.page.pageNumber=0,this.page.size=10,this.pageNumber=1}ngOnInit(){this.getPageConfig()}getPageConfig(){this.giftService.getGiftPage({limit:this.page.size,withPassive:!0},t=>{this.isLoading=!1,this.page.totalElements=t.totalElements,this.page.totalPages=t.totalPages,this.setPage({offset:0})})}setPage(t){this.page.pageNumber=t.offset,this.getGiftList()}setPage2(t){this.setPage({offset:t})}getGiftList(){let t;this.isLoading=!0,t={limit:this.page.size,skip:this.page.size*this.page.pageNumber,withPassive:!0},this.giftService.getGiftList(t,i=>{this.data=i,this.isLoading=!1})}customerToggle(t){this.giftService.toogle({_id:t._id},i=>{t.active=i.active})}delete(t){Z().fire({title:"Silme \u0130\u015flemini Onaylay\u0131n",text:"Hediye silme i\u015flemini l\xfctfen onaylay\u0131n. Bu i\u015flem geri al\u0131namaz",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"\u0130\u015flemi Onayla",cancelButtonText:"Vazge\xe7"}).then(i=>{i.isConfirmed&&this.userService.delete("gift",{_id:t},o=>{Z().fire({title:"Hediye Silinmi\u015ftir",icon:"success",timer:2e3,timerProgressBar:!0}),this.setPage({offset:this.page.pageNumber})})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h),e.Y36(J.K))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-list"]],decls:33,vars:30,consts:[[1,"d-flex","justify-content-between","align-items-center","flex-wrap","grid-margin"],[1,"mb-3","mb-md-0"],["type","submit",1,"btn","btn-success","btn-icon-text",3,"routerLink"],[1,"btn-icon-prepend","feather","icon-plus"],[1,"card","grid-margin","d-none","d-lg-block"],[1,"card-header"],[1,"card-body"],[1,"table-responsive"],[1,"bootstrap","expandable",3,"headerHeight","columnMode","count","offset","limit","externalPaging","loadingIndicator","footerHeight","rowHeight","rows","scrollbarH","page"],["myTable",""],["name","Index",3,"width","resizeable","sortable","draggable","canAutoResize"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],["name","image"],["name","name"],["name","value"],[3,"width","resizeable","sortable","draggable","canAutoResize"],[1,"d-md-block","d-lg-none"],[1,"row"],["class","col-12 col-sm-6 col-md-6 col-lg-6 stretch-card",4,"ngFor","ngForOf"],[1,"col-12"],[3,"collectionSize","ellipses","page","maxSize","rotate","boundaryLinks","click","pageChange"],["onerror","this.src='https://iili.io/JXcmTOl.png';",2,"height","100px","width","100px",3,"src"],["ngbTooltip","D\xfczenle",1,"btn","btn-icon","btn-light","m-2",3,"routerLink"],[1,"btn-label"],[1,"feather","icon-edit"],["ngbTooltip","Sil",1,"btn","text-danger","btn-icon","btn-light","m-2",3,"click"],[1,"feather","icon-x"],[1,"col-12","col-sm-6","col-md-6","col-lg-6","stretch-card"],[1,"card","stretch-card","mb-3"],[1,"col-4","p-0"],["onerror","this.src='https://iili.io/JXcmTOl.png';",1,"card-img-top",2,"object-fit","cover",3,"src","alt"],[1,"col-8"],[1,"card-title"],[1,"list-group","list-group-flush"],[1,"list-group-item","d-flex","justify-content-between"],[1,"card-footer","p-1"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"Hediyeler"),e.qZA(),e.TgZ(3,"a",2),e._UZ(4,"i",3),e._uU(5," Yeni Hediye Ekle "),e.qZA()(),e.TgZ(6,"div",4)(7,"div",5),e._uU(8,"Hediye Listesi"),e.qZA(),e.TgZ(9,"div",6)(10,"div",7)(11,"ngx-datatable",8,9),e.NdJ("page",function(a){return i.setPage(a)}),e.TgZ(13,"ngx-datatable-column",10),e.YNc(14,N,2,0,"ng-template",11),e.YNc(15,k,2,1,"ng-template",12),e.qZA(),e.TgZ(16,"ngx-datatable-column",13),e.YNc(17,q,2,0,"ng-template",11),e.YNc(18,E,1,1,"ng-template",12),e.qZA(),e.TgZ(19,"ngx-datatable-column",14),e.YNc(20,G,2,0,"ng-template",11),e.YNc(21,M,1,1,"ng-template",12),e.qZA(),e.TgZ(22,"ngx-datatable-column",15),e.YNc(23,z,2,0,"ng-template",11),e.YNc(24,B,2,1,"ng-template",12),e.qZA(),e.TgZ(25,"ngx-datatable-column",16),e.YNc(26,H,2,0,"ng-template",11),e.YNc(27,I,6,3,"ng-template",12),e.qZA()()()()(),e.TgZ(28,"div",17)(29,"div",18),e.YNc(30,Y,22,7,"div",19),e.TgZ(31,"div",20)(32,"ngb-pagination",21),e.NdJ("click",function(){return i.setPage2(i.pageNumber)})("pageChange",function(a){return i.pageNumber=a}),e.qZA()()()()),2&t&&(e.xp6(3),e.Q6J("routerLink",e.DdM(29,O)),e.xp6(8),e.Q6J("headerHeight",50)("columnMode","force")("count",i.page.totalElements)("offset",i.page.pageNumber)("limit",i.page.size)("externalPaging",!0)("loadingIndicator",i.isLoading)("footerHeight",50)("rowHeight","auto")("rows",i.data)("scrollbarH",!0),e.xp6(2),e.Q6J("width",60)("resizeable",!1)("sortable",!1)("draggable",!1)("canAutoResize",!1),e.xp6(12),e.Q6J("width",200)("resizeable",!0)("sortable",!1)("draggable",!1)("canAutoResize",!0),e.xp6(5),e.Q6J("ngForOf",i.data),e.xp6(2),e.Q6J("collectionSize",i.page.totalElements)("ellipses",!1)("page",i.pageNumber)("maxSize",5)("rotate",!0)("boundaryLinks",!0))},directives:[d.yS,p.nE,p.UC,p.tk,p.vq,u._L,m.sg,u.N9],styles:[""]}),n})();const F=[{path:"",component:T,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:T}]},{path:"create",component:w},{path:"edit/:id",component:L}];let P=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.Bz.forChild(F)],d.Bz]}),n})(),Q=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[m.ez,P,p.xD,u.IJ,s.u5]]}),n})()}}]);