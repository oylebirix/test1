"use strict";(self.webpackChunknobleui_angular=self.webpackChunknobleui_angular||[]).push([[947],{9947:(We,q,g)=>{g.r(q),g.d(q,{MessageModule:()=>Xe});var d=g(9808),_=g(3492),v=g(5861),L=g(5226),p=g.n(L),e=g(5e3),Z=g(9534),C=g(2290),x=g(2925),y=g(2608),k=g(4045),H=g(3175);let M=(()=>{class i{constructor(t){this.socket=t,this.socket.on("connect",()=>{this.emitToken()})}subscribeToNewMessage(t){this.socket.on("dialog/new-message",n=>{t(n)})}sendMessage(t){}emitToken(){let t=localStorage.getItem("token");if(t){const n=(new H.N0).decodeToken(t);this.socket.emit("subscribe/admin",{_id:n._id})}}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(x.sk))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var h=g(1238),c=g(2382),U=g(4841);const S=["psBottom"],F=["chatInput"];function Y(i,l){1&i&&(e.TgZ(0,"b",25),e._uU(1,"(F)"),e.qZA())}function j(i,l){1&i&&(e.TgZ(0,"span",26),e._uU(1,"V\u0130P"),e.qZA())}function z(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",13),e._UZ(1,"img",14),e.TgZ(2,"div",15)(3,"ul",16),e._UZ(4,"br"),e.TgZ(5,"li",17)(6,"span"),e._uU(7,"Ad Soyad"),e.qZA(),e._UZ(8,"br"),e.TgZ(9,"b"),e._uU(10),e.qZA(),e.YNc(11,Y,2,0,"b",18),e.qZA(),e.TgZ(12,"li",17)(13,"span"),e._uU(14,"Ya\u015f"),e.qZA(),e._UZ(15,"br"),e.TgZ(16,"b"),e._uU(17),e.qZA()(),e.TgZ(18,"li",17)(19,"span"),e._uU(20,"Email/Telefon"),e.qZA(),e._UZ(21,"br"),e.TgZ(22,"b"),e._uU(23),e.qZA()(),e.TgZ(24,"li",17)(25,"span"),e._uU(26,"\u0130nstagram"),e.qZA(),e._UZ(27,"br"),e.TgZ(28,"b"),e._uU(29),e.qZA()(),e.TgZ(30,"li",17)(31,"span"),e._uU(32,"Facebook"),e.qZA(),e._UZ(33,"br"),e.TgZ(34,"b"),e._uU(35),e.qZA()(),e.TgZ(36,"li",17)(37,"span"),e._uU(38,"\u015eehir"),e.qZA(),e._UZ(39,"br"),e.TgZ(40,"b"),e._uU(41),e.qZA()(),e.TgZ(42,"li",17)(43,"span"),e._uU(44,"Jeton"),e.qZA(),e._UZ(45,"br"),e.TgZ(46,"b"),e._uU(47),e.qZA(),e.YNc(48,j,2,0,"span",19),e.qZA(),e.TgZ(49,"li",17)(50,"button",20),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return s.banUser(s.user1)}),e._uU(51," Banla "),e._UZ(52,"i",21),e.qZA()(),e.TgZ(53,"li",17)(54,"button",22),e.NdJ("click",function(){return e.CHM(t),e.oxw().sendVipMessage()}),e._uU(55," Vip Ol Mesaj\u0131 G\xf6nder "),e._UZ(56,"i",23),e.qZA()(),e.TgZ(57,"li",17)(58,"button",24),e.NdJ("click",function(){return e.CHM(t),e.oxw().sendNudeMessage()}),e._uU(59," Uygunsuz Mesaj\u0131 G\xf6nder "),e._UZ(60,"i",23),e.qZA()()()()()}if(2&i){const t=e.oxw();let n,s,a;e.xp6(1),e.Q6J("src",null==t.user1?null:t.user1.pp,e.LSH),e.xp6(9),e.hij("",null==t.user1?null:t.user1.name," "),e.xp6(1),e.Q6J("ngIf",null==t.selectedDialog||null==t.selectedDialog.user1?null:t.selectedDialog.user1.fake),e.xp6(6),e.Oqu(null==t.user1?null:t.user1.age),e.xp6(6),e.Oqu(null!==(n=null==t.user1?null:t.user1.email)&&void 0!==n?n:t.user1.phone),e.xp6(6),e.Oqu(null!==(s=null==t.user1?null:t.user1.instagram)&&void 0!==s?s:"Belirtilmemi\u015f"),e.xp6(6),e.Oqu(null!==(a=null==t.user1?null:t.user1.facebook)&&void 0!==a?a:"Belirtilmemi\u015f"),e.xp6(6),e.Oqu(null!=t.user1&&t.user1.city?null==t.user1?null:t.user1.city:"Belirtilmemi\u015f"),e.xp6(6),e.Oqu(null!=t.user1&&t.user1.coins?null==t.user1?null:t.user1.coins:"Belirtilmemi\u015f"),e.xp6(1),e.Q6J("ngIf",t.isVip(t.user1)),e.xp6(2),e.s9C("ngbTooltip",null!=t.user1&&t.user1.banned?"Ban\u0131 Kald\u0131r":"Banla")}}function B(i,l){1&i&&(e.TgZ(0,"b",25),e._uU(1,"(F)"),e.qZA())}function E(i,l){1&i&&(e.TgZ(0,"span",26),e._uU(1,"V\u0130P"),e.qZA())}function I(i,l){if(1&i&&(e.TgZ(0,"div",13),e._UZ(1,"img",14),e.TgZ(2,"div",15)(3,"ul",16),e._UZ(4,"br"),e.TgZ(5,"li",17)(6,"span"),e._uU(7,"Ad Soyad"),e.qZA(),e._UZ(8,"br"),e.TgZ(9,"b"),e._uU(10),e.qZA(),e.YNc(11,B,2,0,"b",18),e.qZA(),e.TgZ(12,"li",17)(13,"span"),e._uU(14,"Ya\u015f"),e.qZA(),e._UZ(15,"br"),e.TgZ(16,"b"),e._uU(17),e.qZA()(),e.TgZ(18,"li",17)(19,"span"),e._uU(20,"Email/Telefon"),e.qZA(),e._UZ(21,"br"),e.TgZ(22,"b"),e._uU(23),e.qZA()(),e.TgZ(24,"li",17)(25,"span"),e._uU(26,"\u0130nstagram"),e.qZA(),e._UZ(27,"br"),e.TgZ(28,"b"),e._uU(29),e.qZA()(),e.TgZ(30,"li",17)(31,"span"),e._uU(32,"Facebook"),e.qZA(),e._UZ(33,"br"),e.TgZ(34,"b"),e._uU(35),e.qZA()(),e.TgZ(36,"li",17)(37,"span"),e._uU(38,"\u015eehir"),e.qZA(),e._UZ(39,"br"),e.TgZ(40,"b"),e._uU(41),e.qZA()(),e.TgZ(42,"li",17)(43,"span"),e._uU(44,"Jeton"),e.qZA(),e._UZ(45,"br"),e.TgZ(46,"b"),e._uU(47),e.qZA(),e.YNc(48,E,2,0,"span",19),e.qZA()()()()),2&i){const t=e.oxw();let n,s,a;e.xp6(1),e.Q6J("src",null==t.user2?null:t.user2.pp,e.LSH),e.xp6(9),e.hij("",null==t.user2?null:t.user2.name," "),e.xp6(1),e.Q6J("ngIf",null==t.user2?null:t.user2.fake),e.xp6(6),e.Oqu(null==t.user2?null:t.user2.age),e.xp6(6),e.Oqu(null!==(n=null==t.user2?null:t.user2.email)&&void 0!==n?n:t.user2.phone),e.xp6(6),e.Oqu(null!==(s=null==t.user2?null:t.user2.instagram)&&void 0!==s?s:"Belirtilmemi\u015f"),e.xp6(6),e.Oqu(null!==(a=null==t.user2?null:t.user2.facebook)&&void 0!==a?a:"Belirtilmemi\u015f"),e.xp6(6),e.Oqu(null!=t.user2&&t.user2.city?null==t.user2?null:t.user2.city:"Belirtilmemi\u015f"),e.xp6(6),e.Oqu(null!=t.user2&&t.user2.coins?null==t.user2?null:t.user2.coins:"Belirtilmemi\u015f"),e.xp6(1),e.Q6J("ngIf",t.isVip(t.user2))}}function O(i,l){1&i&&e._UZ(0,"div",67)}function P(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"ul",68)(1,"li",69),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).addEmoji("\u{1f60a}")}),e.TgZ(2,"span"),e._uU(3,"G\xfcler y\xfcz"),e.qZA(),e.TgZ(4,"span"),e._uU(5,"\u{1f60a}"),e.qZA()(),e.TgZ(6,"li",69),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).addEmoji("\u2764\ufe0f")}),e.TgZ(7,"span"),e._uU(8,"Kalp"),e.qZA(),e.TgZ(9,"span"),e._uU(10,"\u2764\ufe0f"),e.qZA()(),e.TgZ(11,"li",69),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).addEmoji("\u{1f618}")}),e.TgZ(12,"span"),e._uU(13,"\xd6p\xfcc\xfck"),e.qZA(),e.TgZ(14,"span"),e._uU(15,"\u{1f618}"),e.qZA()(),e.TgZ(16,"li",69),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).addEmoji("\u{1f339}")}),e.TgZ(17,"span"),e._uU(18,"G\xfcl"),e.qZA(),e.TgZ(19,"span"),e._uU(20,"\u{1f339}"),e.qZA()(),e.TgZ(21,"li",69),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).addEmoji("\u{1f382}")}),e.TgZ(22,"span"),e._uU(23,"Pasta"),e.qZA(),e.TgZ(24,"span"),e._uU(25,"\u{1f382}"),e.qZA()(),e.TgZ(26,"li",69),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).addEmoji("\u{1f381}")}),e.TgZ(27,"span"),e._uU(28,"Hediye"),e.qZA(),e.TgZ(29,"span"),e._uU(30,"\u{1f381}"),e.qZA()(),e.TgZ(31,"li",69),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).addEmoji("\u{1f389}")}),e.TgZ(32,"span"),e._uU(33,"Kutlama"),e.qZA(),e.TgZ(34,"span"),e._uU(35,"\u{1f389}"),e.qZA()(),e.TgZ(36,"li",69),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).addEmoji("\u{1f44d}")}),e.TgZ(37,"span"),e._uU(38,"Tamam"),e.qZA(),e.TgZ(39,"span"),e._uU(40,"\u{1f44d}"),e.qZA()(),e.TgZ(41,"li",69),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).addEmoji("\u{1f44e}")}),e.TgZ(42,"span"),e._uU(43,"Hay\u0131r"),e.qZA(),e.TgZ(44,"span"),e._uU(45,"\u{1f44e}"),e.qZA()(),e.TgZ(46,"li",69),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).addEmoji("\u{1f4a9}")}),e.TgZ(47,"span"),e._uU(48,"Kaka"),e.qZA(),e.TgZ(49,"span"),e._uU(50,"\u{1f4a9}"),e.qZA()()()}}function Q(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",70),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).loadMore()}),e._uU(1," T\xfcm Mesajlar\u0131 G\xf6ster "),e.qZA()}}function R(i,l){if(1&i&&e._UZ(0,"img",79),2&i){const t=e.oxw().$implicit;e.Q6J("src",t.sender.pp,e.LSH)}}function G(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",80),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit;return e.oxw(2).deleteMessage(s)}),e._UZ(1,"i",42),e.qZA()}}function V(i,l){if(1&i&&(e.TgZ(0,"div",81)(1,"p"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.message," ")}}function K(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",80),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit;return e.oxw(2).deleteMessage(s)}),e._UZ(1,"i",42),e.qZA()}}function $(i,l){if(1&i&&e._UZ(0,"img",82),2&i){const t=e.oxw().$implicit;e.Q6J("src",t.image,e.LSH)}}function X(i,l){1&i&&(e.TgZ(0,"p"),e._uU(1," Sistem mesaj\u0131d\u0131r. "),e.qZA())}function W(i,l){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.sendedCoin," jeton g\xf6nderildi. ")}}const ee=function(i,l,t){return{me:i,friend:l,system:t}};function te(i,l){if(1&i&&(e.TgZ(0,"li",71),e.YNc(1,R,1,1,"img",72),e.TgZ(2,"div",73)(3,"div",74)(4,"div",29),e.YNc(5,G,2,0,"button",75),e.YNc(6,V,3,1,"div",76),e.YNc(7,K,2,0,"button",75),e.qZA(),e.YNc(8,$,1,1,"img",77),e.YNc(9,X,2,0,"p",78),e.YNc(10,W,2,1,"p",78),e.TgZ(11,"span"),e._uU(12),e.ALo(13,"date"),e.qZA()()()()),2&i){const t=l.$implicit;e.Q6J("ngClass",e.kEZ(12,ee,!t.systemMessage&&t.sender.fake,!t.systemMessage&&!t.sender.fake,t.systemMessage)),e.xp6(1),e.Q6J("ngIf",!t.systemMessage),e.xp6(4),e.Q6J("ngIf",t.sender.fake),e.xp6(1),e.Q6J("ngIf",!t.image),e.xp6(1),e.Q6J("ngIf",!t.sender.fake),e.xp6(1),e.Q6J("ngIf",t.image),e.xp6(1),e.Q6J("ngIf",t.systemMessage||t.coinMessage),e.xp6(1),e.Q6J("ngIf",null!=t.sendedCoin&&t.sendedCoin>0),e.xp6(2),e.Oqu(e.xi3(13,9,t.createdAt,"HH:mm"))}}const ne=function(){return{standalone:!0}};function ie(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",27)(1,"div",28)(2,"div",29)(3,"div",30)(4,"figure",31),e._UZ(5,"img",32),e.YNc(6,O,1,0,"div",33),e.qZA(),e.TgZ(7,"div")(8,"p"),e._uU(9),e._UZ(10,"i",34),e._uU(11),e.qZA()()(),e.TgZ(12,"div",35),e.YNc(13,P,51,0,"ng-template",null,36,e.W1O),e.TgZ(15,"label",37),e._uU(16,"Sistem mesaj\u0131 g\xf6nder"),e.qZA(),e.TgZ(17,"input",38),e.NdJ("ngModelChange",function(s){return e.CHM(t),e.oxw().systemMessage=s}),e.qZA(),e.TgZ(18,"button",39),e._UZ(19,"i",40),e.qZA(),e.TgZ(20,"button",41),e.NdJ("click",function(){return e.CHM(t),e.oxw().deleteDialog()}),e._UZ(21,"i",42),e.qZA()()(),e.TgZ(22,"div",43,44)(24,"div",45),e.YNc(25,Q,2,0,"button",46),e.qZA(),e.TgZ(26,"ul",47),e.YNc(27,te,14,16,"li",48),e.qZA()(),e.TgZ(28,"div",49)(29,"div",50)(30,"div",51)(31,"div",52)(32,"button",53),e.NdJ("click",function(){return e.CHM(t),e.oxw().newCoinMessage()}),e._UZ(33,"i",54),e.qZA(),e.TgZ(34,"button",55),e.NdJ("click",function(){return e.CHM(t),e.MAs(37).click()}),e._UZ(35,"i",56),e.TgZ(36,"input",57,58),e.NdJ("change",function(s){return e.CHM(t),e.oxw().imageChanged(s)}),e.qZA()()()(),e.TgZ(38,"div",59)(39,"div",60)(40,"form",61),e.NdJ("submit",function(){return e.CHM(t),e.oxw().newMessage()}),e.TgZ(41,"div",60)(42,"textarea",62,63),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw().newMessage()})("ngModelChange",function(s){return e.CHM(t),e.oxw().messageText=s}),e.qZA()()(),e.TgZ(44,"div",64)(45,"div")(46,"button",65),e.NdJ("click",function(){return e.CHM(t),e.oxw().newMessage()}),e._UZ(47,"i",66),e.qZA()()()()()()()()()}if(2&i){const t=e.MAs(14),n=e.oxw();e.xp6(5),e.Q6J("src",null==n.selectedDialog||null==n.selectedDialog.user1?null:n.selectedDialog.user1.pp,e.LSH),e.xp6(1),e.Q6J("ngIf",null==n.selectedDialog.user1?null:n.selectedDialog.user1.online),e.xp6(3),e.hij(" ",null==n.selectedDialog||null==n.selectedDialog.user1?null:n.selectedDialog.user1.name,""),e.xp6(2),e.hij(" ",null==n.selectedDialog||null==n.selectedDialog.user2?null:n.selectedDialog.user2.name," "),e.xp6(6),e.Q6J("ngModel",n.systemMessage),e.xp6(1),e.Q6J("ngbPopover",t),e.xp6(7),e.Q6J("ngIf",!n.allLoad),e.xp6(2),e.Q6J("ngForOf",n.messages),e.xp6(15),e.s9C("placeholder",n.systemMessage?"Sistem Mesaj\u0131 Yaz":"Mesaj Yaz"),e.Q6J("ngModel",n.messageText)("ngModelOptions",e.DdM(11,ne))}}let se=(()=>{class i{constructor(t,n,s,a,o,r,u,m,b,T){this.fileUploadService=t,this.toastr=n,this.socket=s,this.messageService=a,this.router=o,this.route=r,this.cdRef=u,this.locationStrategy=m,this.userService=b,this.chatService=T,this.isLoading=!1,this.allLoad=!1,this.dialogs=[],this.originalDialogs=[],this.messages=[],this.setupForNew=!1,this.systemMessage=!1,this.defaultNavActiveId=1}ngAfterViewInit(){setTimeout(()=>{this.chatInput.nativeElement.focus()},1e3)}ngOnInit(){this.route.params.subscribe(t=>{this.dialogId=t.id||null,this.getDialog(this.dialogId)}),this.chatService.subscribeToNewMessage(t=>{let n=t.dialog,s=t.message;(null==n?void 0:n.toString())==this.dialogId&&(this.messages.push(s),setTimeout(()=>{this.psBottom.scrollToBottom(0,0)},10))})}getDialog(t){this.messageService.dialog({_id:t},n=>{n&&n.length>0&&this.selectDialog(n[0])})}dialogSelect(){this.selectedDialog||this.selectDialog(this.originalDialogs[0])}banUser(t){var n="",s="";t.banned?(n="Kullan\u0131c\u0131 engelini Kald\u0131r",s="Kullan\u0131c\u0131 engelini kald\u0131rmak istedi\u011finize emin misiniz? Kullan\u0131c\u0131 tekrar sisteme giri\u015f yapabilir."):(n="Kullan\u0131c\u0131y\u0131 Engelle",s="Engellenen kullan\u0131c\u0131 uygulamay\u0131 bu hesapla bir daha kullanamaz i\u015flem geri al\u0131nabilir."),p().fire({title:n,text:s,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"\u0130\u015flemi Onayla",cancelButtonText:"Vazge\xe7"}).then(a=>{a.isConfirmed&&this.userService.toggleBan({_id:t._id},o=>{p().fire({title:"\u0130\u015flem Tamamland\u0131",icon:"success",timer:2e3,timerProgressBar:!0})})})}selectDialog(t){var n;this.selectedDialog=t,(null===(n=t.user1)||void 0===n?void 0:n.fake)?(this.user2=t.user1,this.user1=t.user2):(this.user2=t.user2,this.user1=t.user1),this.messages=[];let s=0;s=this.allLoad?0:10,this.messageService.getMessageList({dialog:this.selectedDialog._id,limit:s},a=>{if(this.messages=a.sort((r,u)=>new Date(r.createdAt).getTime()-new Date(u.createdAt).getTime()),t.unReadCount>0){var o=[String];for(let r=0;r<this.messages.length;r++){const u=this.messages[r];u.receiver.fake&&(o.push(u._id),this.messages[r].read=!0)}if(o)for(let r=0;r<o.length;r++)this.socket.emit("dialog/read",{_id:o[r]}),this.dialogs.find(m=>m._id==this.selectedDialog._id).unReadCount=0}setTimeout(()=>{this.psBottom.scrollToBottom(0,0)},10)})}imageChanged(t){var n=this;return(0,v.Z)(function*(){n.pp=t.target.files;let s=yield n.uploadImage();s&&n.newMessageWithImage(s)})()}loadMore(){this.allLoad=!0,this.selectDialog(this.selectedDialog)}uploadImage(){return new Promise((t,n)=>{this.fileUploadService.upload(this.pp,{module:"pp"},s=>{var a;(null===(a=null==s?void 0:s.urls)||void 0===a?void 0:a.length)?t(s.urls[0].url):n(null)})})}deleteMessage(t){p().fire({title:"Silme \u0130\u015flemi Onaylay\u0131n",text:"Mesaj silinecektir. Bu i\u015flem geri al\u0131namaz",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"\u0130\u015flemi Onayla",cancelButtonText:"Vazge\xe7"}).then(n=>{n.isConfirmed&&this.userService.delete("message",{_id:null==t?void 0:t._id},s=>{p().fire({title:"Mesaj Silinmi\u015ftir",icon:"success",timer:2e3,timerProgressBar:!0}),this.selectDialog(this.selectedDialog),this.selectDialog(this.selectedDialog)})})}newMessage(){let t=this.selectedDialog.user1,n=this.selectedDialog.user2;var s=null,a=null;t.fake?(s=t,a=n):(s=n,a=t);let o={_id:null,message:this.messageText,dialog:this.selectedDialog._id,sender:s,receiver:a,createdAt:Date(),systemMessage:this.systemMessage};return this.messageService.sendMessage({dialog:this.selectedDialog._id,message:this.messageText,systemMessage:this.systemMessage},r=>{o._id=r._id,this.messages.push(o),this.messageText="",setTimeout(()=>{this.psBottom.scrollToBottom(0,500)},100)}),!1}newCoinMessage(){let t=this.selectedDialog.user1,n=this.selectedDialog.user2;var s=null,a=null;t.fake?(s=t,a=n):(s=n,a=t);let o={_id:null,message:"Konu\u015ftu\u011funuz ki\u015finin jetonu bitti. Jeton hediye etmek ister misiniz?",dialog:this.selectedDialog._id,sender:s,receiver:a,createdAt:Date(),coinMessage:!0};return this.messageService.sendMessage({dialog:this.selectedDialog._id,message:"Konu\u015ftu\u011funuz ki\u015finin jetonu bitti. Jeton hediye etmek ister misiniz?",coinMessage:!0},r=>{o._id=r._id,this.messages.push(o),this.messageText="",setTimeout(()=>{this.psBottom.scrollToBottom(0,500)},100)}),!1}sendVipMessage(){let t=this.selectedDialog.user1,n=this.selectedDialog.user2;var s=null,a=null;t.fake?(s=t,a=n):(s=n,a=t);let o={_id:null,message:"Telefon/\u0130nstagram mesaj\u0131 g\xf6ndermek i\xe7in l\xfctfen V\u0130P \xfcye olun",dialog:this.selectedDialog._id,sender:s,receiver:a,createdAt:Date(),systemMessage:!0};return this.messageService.sendMessage({dialog:this.selectedDialog._id,message:"Telefon/\u0130nstagram mesaj\u0131 g\xf6ndermek i\xe7in l\xfctfen V\u0130P \xfcye olun",systemMessage:!0},r=>{o._id=r._id,this.messages.push(o),this.messageText="",setTimeout(()=>{this.psBottom.scrollToBottom(0,500)},100)}),!1}sendNudeMessage(){let t=this.selectedDialog.user1,n=this.selectedDialog.user2;var s=null,a=null;t.fake?(s=t,a=n):(s=n,a=t);let o={_id:null,message:"Uygunsuz resim/i\xe7erik g\xf6nderimi yasakt\u0131r. L\xfctfen kurallara uyal\u0131m. Kurallara uymad\u0131\u011f\u0131n\u0131z takdirde hesab\u0131n\u0131z kapanabilir.",dialog:this.selectedDialog._id,sender:s,receiver:a,createdAt:Date(),systemMessage:!0};return this.messageService.sendMessage({dialog:this.selectedDialog._id,message:"Uygunsuz resim/i\xe7erik g\xf6nderimi yasakt\u0131r. L\xfctfen kurallara uyal\u0131m. Kurallara uymad\u0131\u011f\u0131n\u0131z takdirde hesab\u0131n\u0131z kapanabilir.",systemMessage:!0},r=>{o._id=r._id,this.messages.push(o),this.messageText="",setTimeout(()=>{this.psBottom.scrollToBottom(0,500)},100)}),!1}addEmoji(t){this.messageText?this.messageText+=t:this.messageText=t}newMessageWithImage(t){let n=this.selectedDialog.user1,s=this.selectedDialog.user2;var a=null,o=null;n.fake?(a=n,o=s):(a=s,o=n);let r={_id:null,message:"Resim",dialog:this.selectedDialog._id,sender:a,image:t,receiver:o,createdAt:Date()};return this.messageService.sendMessage({dialog:this.selectedDialog._id,message:"Resim",image:t},u=>{r._id=u._id,this.messages.push(r),this.messageText="",setTimeout(()=>{this.psBottom.scrollToBottom(0,500)},100)}),!1}deleteDialog(){p().fire({title:"Silme \u0130\u015flemi Onaylay\u0131n",text:"Bu g\xf6r\xfc\u015fme ve mesajlar silinecektir. Bu i\u015flem geri al\u0131namaz",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"\u0130\u015flemi Onayla",cancelButtonText:"Vazge\xe7"}).then(t=>{var n;t.isConfirmed&&this.userService.delete("dialog",{_id:null===(n=this.selectedDialog)||void 0===n?void 0:n._id},s=>{this.selectedDialog=null,this.selectDialog(this.selectedDialog),p().fire({title:"G\xf6r\xfc\u015fme Silinmi\u015ftir",icon:"success",timer:2e3,timerProgressBar:!0})})})}isVip(t){let n=new Date(t.vipStart),s=new Date(t.vipEnd),a=new Date;return n<=a&&s>=a}delete(t){}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Z.J),e.Y36(C._W),e.Y36(x.sk),e.Y36(y.e),e.Y36(_.F0),e.Y36(_.gz),e.Y36(e.sBO),e.Y36(d.S$),e.Y36(k.K),e.Y36(M))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-list"]],viewQuery:function(t,n){if(1&t&&(e.Gf(S,5),e.Gf(F,5)),2&t){let s;e.iGM(s=e.CRH())&&(n.psBottom=s.first),e.iGM(s=e.CRH())&&(n.chatInput=s.first)}},decls:18,vars:4,consts:[[1,"row","chat-wrapper"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"row","position-relative"],[1,"col-lg-4","chat-aside","border-end-lg"],["ngbNav","",1,"nav-tabs","justify-content-center"],["horizontalCenterNav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[1,"border","border-top-0","p-3",3,"ngbNavOutlet"],["class","col-lg-8 chat-content show",4,"ngIf"],[2,"text-align","center"],["onerror","this.src='https://iili.io/JXcmTOl.png';","alt","user",1,"rounded-circle",2,"width","100px","height","100px","object-fit","cover",3,"src"],[1,"col-12","col-sm-12"],[1,"list-group","list-group-flush","p-0"],[1,"list-group-item","p-0"],["class","text-danger",4,"ngIf"],["class","badge bg-warning",4,"ngIf"],[1,"btn","btn-sm","btn-light","m-1","text-danger",3,"ngbTooltip","click"],[1,"feather","icon-alert-octagon"],["ngbTooltip","Telefon/\u0130nstagram mesaj\u0131 g\xf6ndermek i\xe7in l\xfctfen V\u0130P \xfcye olun.",1,"btn","btn-sm","btn-info","m-1",3,"click"],[1,"feather","icon-mail"],["ngbTooltip","Uygunsuz resim/i\xe7erik g\xf6nderimi yasakt\u0131r. L\xfctfen kurallara uyal\u0131m. Kurallara uymad\u0131\u011f\u0131n\u0131z takdirde hesab\u0131n\u0131z kapanabilir.",1,"btn","btn-sm","btn-info","m-1",3,"click"],[1,"text-danger"],[1,"badge","bg-warning"],[1,"col-lg-8","chat-content","show"],[1,"chat-header","border-bottom","pb-2"],[1,"d-flex","justify-content-between"],[1,"d-flex","align-items-center"],[1,"mb-0","me-2"],["onerror","this.src='https://iili.io/JXcmTOl.png';","alt","image",1,"img-sm","rounded-circle",3,"src"],["class","status online",4,"ngIf"],[1,"feather","icon-arrow-right","pr-2","pl-2"],[1,"ml-auto",2,"text-align","center"],["popContent",""],["for","send_message",1,"form-label",2,"margin-right","10px"],["type","checkbox","name","send_message","id","send_message",2,"margin-right","10px",3,"ngModel","ngModelChange"],["autoClose","false","popoverTitle","Emojiler","type","button","ngbTooltip","Emojiler",1,"btn","border","btn-icon","rounded-circle","me-2",3,"ngbPopover"],[1,"feather","icon-star","text-muted"],["ngbTooltip","G\xf6r\xfc\u015fmeyi Sil",1,"btn","btn-danger","btn-sm",3,"click"],[1,"feather","icon-trash-2"],[1,"chat-body","align-items-baseline",2,"min-height","400px",3,"perfectScrollbar"],["psBottom","ngxPerfectScrollbar"],[1,"row",2,"align-items","center","align-content","center","justify-content","center"],["style","align-self: center; width: 200px;","class","btn btn-sm btn-primary m-1",3,"click",4,"ngIf"],[1,"messages",2,"flex-direction","column-reverse"],["class","message-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"chat-footer"],[1,"row"],[1,"col-12","col-md-3"],[1,"d-flex","justify-content-between","mb-2","mb-sm-0"],["type","button","ngbTooltip","Jeton Bitti Mesaj\u0131 G\xf6nder",1,"btn","border","btn-icon","rounded-circle","me-2",3,"click"],[1,"feather","icon-dollar-sign","text-muted"],["type","button","ngbTooltip","Resim Ekle",1,"btn","border","btn-icon","rounded-circle","me-2",3,"click"],[1,"feather","icon-paperclip","text-muted"],["type","file","hidden","",3,"change"],["fileInput",""],[1,"col-12","col-md-9"],[1,"input-group"],[1,"search-form","flex-grow-1","me-2",3,"submit"],["autosize","","type","text","id","chatForm",1,"form-control",3,"placeholder","ngModel","ngModelOptions","keyup.enter","ngModelChange"],["chatInput",""],[1,"input-group-append"],["type","button",1,"btn","btn-primary","btn-icon","rounded-circle",3,"click"],[1,"feather","icon-send"],[1,"status","online"],[1,"list-group","list-group-flush","p-2"],[1,"list-group-item","p-2",3,"click"],[1,"btn","btn-sm","btn-primary","m-1",2,"align-self","center","width","200px",3,"click"],[1,"message-item",3,"ngClass"],["onerror","this.src='https://iili.io/JXcmTOl.png';","class","img-xs rounded-circle","alt","avatar",3,"src",4,"ngIf"],[1,"content"],[1,"message"],["class","btn",3,"click",4,"ngIf"],["class","bubble",4,"ngIf"],["onerror","this.src='https://iili.io/JXcmTOl.png';","style","\n                            height: 100px;\n                            width: 175px;\n                            object-fit: contain;\n                          ","class","img-thumbnail border border-1",3,"src",4,"ngIf"],[4,"ngIf"],["onerror","this.src='https://iili.io/JXcmTOl.png';","alt","avatar",1,"img-xs","rounded-circle",3,"src"],[1,"btn",3,"click"],[1,"bubble"],["onerror","this.src='https://iili.io/JXcmTOl.png';",1,"img-thumbnail","border","border-1",2,"height","100px","width","175px","object-fit","contain",3,"src"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"ul",6,7)(8,"li",8)(9,"a",9),e._uU(10,"Kullan\u0131c\u0131"),e.qZA(),e.YNc(11,z,61,11,"ng-template",10),e.qZA(),e.TgZ(12,"li",8)(13,"a",9),e._uU(14,"Fake"),e.qZA(),e.YNc(15,I,49,10,"ng-template",10),e.qZA()(),e._UZ(16,"div",11),e.qZA(),e.YNc(17,ie,48,12,"div",12),e.qZA()()()()()),2&t){const s=e.MAs(7);e.xp6(8),e.Q6J("ngbNavItem",1),e.xp6(4),e.Q6J("ngbNavItem",2),e.xp6(4),e.Q6J("ngbNavOutlet",s),e.xp6(1),e.Q6J("ngIf",null!=n.selectedDialog)}},directives:[h.Pz,h.nv,h.Vx,h.uN,d.O5,h._L,h.tO,c.Wl,c.JJ,c.On,h.o8,U.$V,d.sg,d.mk,c._Y,c.JL,c.F,c.Fj],pipes:[d.uU],styles:[""]}),i})();var A=g(2340),w=g(2182),f=g(6166);function ae(i,l){1&i&&(e.TgZ(0,"span"),e._uU(1,"#"),e.qZA())}function le(i,l){if(1&i&&(e.TgZ(0,"b"),e._uU(1),e.qZA()),2&i){const t=l.rowIndex;e.xp6(1),e.Oqu(t+1)}}function oe(i,l){1&i&&(e.TgZ(0,"span"),e._uU(1,"G\xf6nderen \xdcye"),e.qZA())}function re(i,l){if(1&i&&e._uU(0),2&i){const t=l.value;e.hij(" ",null==t?null:t.name," ")}}function ce(i,l){1&i&&(e.TgZ(0,"span"),e._uU(1,"Al\u0131c\u0131 \xdcye"),e.qZA())}function ue(i,l){if(1&i&&e._uU(0),2&i){const t=l.value;e.hij(" ",null==t?null:t.name," ")}}function ge(i,l){1&i&&(e.TgZ(0,"span"),e._uU(1,"Mesaj"),e.qZA())}function de(i,l){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=l.value;e.xp6(1),e.Oqu(null==t?null:t.message)}}function me(i,l){1&i&&(e.TgZ(0,"span"),e._uU(1,"Tarih"),e.qZA())}function _e(i,l){if(1&i&&(e._uU(0),e.ALo(1,"date")),2&i){const t=l.value;e.hij(" ",e.xi3(1,1,null==t?null:t.createdAt,"dd-MM-yyyy HH:mm")," ")}}function pe(i,l){1&i&&(e.TgZ(0,"span"),e._uU(1,"\u0130\u015flem"),e.qZA())}function he(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"a",21),e._uU(1," Link "),e.qZA(),e.TgZ(2,"a",22),e.NdJ("click",function(){const a=e.CHM(t).row;return e.oxw().openInNewTab(a)}),e.TgZ(3,"span",23),e._UZ(4,"i",24),e.qZA()(),e.TgZ(5,"button",25),e.NdJ("click",function(){const a=e.CHM(t).row;return e.oxw().delete(a)}),e.TgZ(6,"span",23),e._UZ(7,"i",26),e.qZA()(),e.TgZ(8,"a",27),e.NdJ("click",function(){const a=e.CHM(t).row;return e.oxw().openMessage(a)}),e.TgZ(9,"span",23),e._UZ(10,"i",28),e.qZA()()}if(2&i){const t=l.row,n=e.oxw();e.Q6J("href",n.getLink(t),e.LSH)}}function fe(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",29)(1,"div",30)(2,"div",6)(3,"div",19)(4,"div",31),e._UZ(5,"img",32),e.qZA(),e.TgZ(6,"div",33),e._uU(7," G\xf6nderen \xdcye: "),e.TgZ(8,"b",34),e._uU(9),e.qZA(),e._UZ(10,"br"),e._uU(11," Al\u0131c\u0131: "),e.TgZ(12,"b",34),e._uU(13),e.qZA(),e.TgZ(14,"p"),e._uU(15),e.qZA()()()(),e.TgZ(16,"div",35)(17,"a",22),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().openInNewTab(a)}),e.TgZ(18,"span",23),e._UZ(19,"i",24),e.qZA()(),e.TgZ(20,"a",27),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().openMessage(a)}),e.TgZ(21,"span",23),e._UZ(22,"i",28),e.qZA()(),e.TgZ(23,"button",25),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().delete(a)}),e.TgZ(24,"span",23),e._UZ(25,"i",26),e.qZA()()()()()}if(2&i){const t=l.$implicit;e.xp6(5),e.Q6J("src",t.image,e.LSH)("alt",t.name),e.xp6(4),e.hij(" ",null==t.user1?null:t.user1.name," "),e.xp6(4),e.hij(" ",null==t.user2?null:t.user2.name," "),e.xp6(2),e.Oqu(null==t.lastMessage?null:t.lastMessage.message)}}let N=(()=>{class i{constructor(t,n,s,a,o,r,u,m,b,T){this.fileUploadService=t,this.toastr=n,this.socket=s,this.messageService=a,this.route=o,this.chatService=r,this.cdRef=u,this.router=m,this.locationStrategy=b,this.userService=T,this.page=new w.T,this.isLoading=!1,this.dialogs=[],this.originalDialogs=[],this.page.pageNumber=0,this.pageNumber=1,this.page.size=50}ngOnInit(){this.getPageConfig(),this.chatService.subscribeToNewMessage(t=>{this.getPageConfig()}),setInterval(()=>{this.getPageConfig()},3e4)}getPageConfig(){this.userService.getDialogPage({key:this.searchText,limit:this.page.size,withPassive:!0},t=>{this.isLoading=!1,this.page.totalElements=t.totalElements,this.page.totalPages=t.totalPages,this.setPage({offset:0})})}setPage(t){this.page.pageNumber=t.offset,this.getDialogs()}setPage2(t){this.setPage({offset:t})}getLink(t){return A.N.BASE_URL3+"#/message/chat/"+t._id}openMessage(t){var n=this;return(0,v.Z)(function*(){let s=t;const{value:a}=yield p().fire({title:"Cevap Yaz",input:"text",inputLabel:"Mesaj",inputPlaceholder:"",inputValidator:b=>b?null:"L\xfctfen Mesaj Girin!"});if(null==a)return;n.messageService.sendMessage({dialog:s._id,message:a,coinMessage:!1,systemMessage:!1},b=>{p().fire({title:"Mesaj G\xf6nderildi",icon:"success",timer:1e3,timerProgressBar:!0}),n.getPageConfig()})})()}openInNewTab(t){const n=document.createElement("a");n.setAttribute("href",A.N.BASE_URL3+"#/message/chat/"+t._id),n.click()}compareByCreatedAt(t,n){return t.createdAt<n.createdAt?-1:t.createdAt>n.createdAt?1:0}getDialogs(){this.messageService.dialogs({fake:!0,limit:this.page.size,skip:this.page.size*this.page.pageNumber},n=>{this.originalDialogs=n,this.dialogs=n})}search(){this.dialogs=this.searchText?this.originalDialogs.filter(t=>{var n,s,a,o;return(null===(s=null===(n=null==t?void 0:t.user1)||void 0===n?void 0:n.name)||void 0===s?void 0:s.toLowerCase().includes(this.searchText.toLowerCase()))||(null===(o=null===(a=null==t?void 0:t.user2)||void 0===a?void 0:a.name)||void 0===o?void 0:o.toLowerCase().includes(this.searchText.toLowerCase()))}):this.originalDialogs}delete(t){p().fire({title:"Silme \u0130\u015flemi Onaylay\u0131n",text:"Bu g\xf6r\xfc\u015fme ve mesajlar silinecektir. Bu i\u015flem geri al\u0131namaz",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"\u0130\u015flemi Onayla",cancelButtonText:"Vazge\xe7"}).then(n=>{n.isConfirmed&&this.userService.delete("dialog",{_id:null==t?void 0:t._id},s=>{this.getDialogs()})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Z.J),e.Y36(C._W),e.Y36(x.sk),e.Y36(y.e),e.Y36(_.gz),e.Y36(M),e.Y36(e.sBO),e.Y36(_.F0),e.Y36(d.S$),e.Y36(k.K))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-list"]],decls:35,vars:36,consts:[[1,"d-flex","justify-content-between","align-items-center","flex-wrap","grid-margin"],[1,"mb-3","mb-md-0"],[1,"input-group","mb-3"],["type","text","placeholder","Ara...","aria-label","Ara","aria-describedby","button-addon2",1,"form-control",3,"ngModel","keyup.enter","ngModelChange"],["type","button","id","button-addon2",1,"btn","btn-outline-secondary",3,"click"],[1,"card","grid-margin","d-none","d-lg-block"],[1,"card-body"],[1,"table-responsive"],[1,"bootstrap","expandable",3,"headerHeight","columnMode","loadingIndicator","footerHeight","rowHeight","rows","count","offset","limit","externalPaging","scrollbarH","page"],["myTable",""],["name","Index",3,"width","resizeable","sortable","draggable","canAutoResize"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],["name","user1"],["name","user2"],["name","lastMessage"],["name","lastMessage",3,"sortable","comparator"],[3,"width","resizeable","sortable","draggable","canAutoResize"],[1,"d-md-block","d-lg-none"],[1,"row"],["class","col-12 col-sm-6 col-md-6 col-lg-6 stretch-card",4,"ngFor","ngForOf"],["target","_blank",3,"href"],["ngbTooltip","Detay",1,"btn","btn-icon","btn-light","m-2",3,"click"],[1,"btn-label"],[1,"feather","icon-mail"],["ngbTooltip","Sil",1,"btn","text-danger","btn-icon","btn-light","m-2",3,"click"],[1,"feather","icon-x"],["ngbTooltip","H\u0131zl\u0131 Cevap Yaz",1,"btn","btn-icon","btn-light","m-2",3,"click"],[1,"feather","icon-send"],[1,"col-12","col-sm-6","col-md-6","col-lg-6","stretch-card"],[1,"card","stretch-card","mb-3"],[1,"col-4","p-0"],["onerror","this.src='https://iili.io/JXcmTOl.png';",1,"card-img-top",2,"object-fit","cover",3,"src","alt"],[1,"col-8"],[1,"card-title"],[1,"card-footer","p-1"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"Cevaps\u0131z Mesajlar"),e.qZA()(),e.TgZ(3,"div",2)(4,"input",3),e.NdJ("keyup.enter",function(){return n.search()})("ngModelChange",function(a){return n.searchText=a}),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return n.search()}),e._uU(6," Ara "),e.qZA()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"ngx-datatable",8,9),e.NdJ("page",function(a){return n.setPage(a)}),e.TgZ(12,"ngx-datatable-column",10),e.YNc(13,ae,2,0,"ng-template",11),e.YNc(14,le,2,1,"ng-template",12),e.qZA(),e.TgZ(15,"ngx-datatable-column",13),e.YNc(16,oe,2,0,"ng-template",11),e.YNc(17,re,1,1,"ng-template",12),e.qZA(),e.TgZ(18,"ngx-datatable-column",14),e.YNc(19,ce,2,0,"ng-template",11),e.YNc(20,ue,1,1,"ng-template",12),e.qZA(),e.TgZ(21,"ngx-datatable-column",15),e.YNc(22,ge,2,0,"ng-template",11),e.YNc(23,de,2,1,"ng-template",12),e.qZA(),e.TgZ(24,"ngx-datatable-column",16),e.YNc(25,me,2,0,"ng-template",11),e.YNc(26,_e,2,4,"ng-template",12),e.qZA(),e.TgZ(27,"ngx-datatable-column",17),e.YNc(28,pe,2,0,"ng-template",11),e.YNc(29,he,11,1,"ng-template",12),e.qZA()()()()(),e.TgZ(30,"div",18)(31,"div",19),e.YNc(32,fe,26,5,"div",20),e.qZA(),e.TgZ(33,"ngx-datatable",8,9),e.NdJ("page",function(a){return n.setPage(a)}),e.qZA()()),2&t&&(e.xp6(4),e.Q6J("ngModel",n.searchText),e.xp6(6),e.Q6J("headerHeight",50)("columnMode","force")("loadingIndicator",n.isLoading)("footerHeight",50)("rowHeight","auto")("rows",n.dialogs)("count",n.page.totalElements)("offset",n.page.pageNumber)("limit",n.page.size)("externalPaging",!0)("scrollbarH",!0),e.xp6(2),e.Q6J("width",60)("resizeable",!1)("sortable",!1)("draggable",!1)("canAutoResize",!1),e.xp6(12),e.Q6J("sortable",!0)("comparator",n.compareByCreatedAt),e.xp6(3),e.Q6J("width",200)("resizeable",!0)("sortable",!1)("draggable",!1)("canAutoResize",!0),e.xp6(5),e.Q6J("ngForOf",n.dialogs),e.xp6(1),e.Q6J("headerHeight",50)("columnMode","force")("loadingIndicator",n.isLoading)("footerHeight",50)("rowHeight","auto")("rows",n.dialogs)("count",n.page.totalElements)("offset",n.page.pageNumber)("limit",n.page.size)("externalPaging",!0)("scrollbarH",!0))},directives:[c.Fj,c.JJ,c.On,f.nE,f.UC,f.tk,f.vq,h._L,d.sg],pipes:[d.uU],styles:[""]}),i})();function be(i,l){1&i&&(e.TgZ(0,"span"),e._uU(1,"#"),e.qZA())}function Te(i,l){if(1&i&&(e.TgZ(0,"b"),e._uU(1),e.qZA()),2&i){const t=l.rowIndex;e.xp6(1),e.Oqu(t+1)}}function Ze(i,l){1&i&&(e.TgZ(0,"span"),e._uU(1,"G\xf6nderen \xdcye"),e.qZA())}function Ce(i,l){if(1&i&&e._uU(0),2&i){const t=l.value;e.hij(" ",null==t?null:t.name," ")}}function ve(i,l){1&i&&(e.TgZ(0,"span"),e._uU(1,"Al\u0131c\u0131 \xdcye"),e.qZA())}function xe(i,l){if(1&i&&e._uU(0),2&i){const t=l.value;e.hij(" ",null==t?null:t.name," ")}}function Ae(i,l){1&i&&(e.TgZ(0,"span"),e._uU(1,"Mesaj"),e.qZA())}function ye(i,l){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=l.value;e.xp6(1),e.Oqu(null==t?null:t.message)}}function ke(i,l){1&i&&(e.TgZ(0,"span"),e._uU(1,"Tarih"),e.qZA())}function Me(i,l){if(1&i&&(e._uU(0),e.ALo(1,"date")),2&i){const t=l.value;e.hij(" ",e.xi3(1,1,null==t?null:t.createdAt,"dd-MM-yyyy HH:mm")," ")}}function Ue(i,l){1&i&&(e.TgZ(0,"span"),e._uU(1,"\u0130\u015flem"),e.qZA())}function we(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"a",21),e._uU(1," Link "),e.qZA(),e.TgZ(2,"a",22),e.NdJ("click",function(){const a=e.CHM(t).row;return e.oxw().openInNewTab(a)}),e.TgZ(3,"span",23),e._UZ(4,"i",24),e.qZA()(),e.TgZ(5,"button",25),e.NdJ("click",function(){const a=e.CHM(t).row;return e.oxw().delete(a)}),e.TgZ(6,"span",23),e._UZ(7,"i",26),e.qZA()(),e.TgZ(8,"a",27),e.NdJ("click",function(){const a=e.CHM(t).row;return e.oxw().openMessage(a)}),e.TgZ(9,"span",23),e._UZ(10,"i",28),e.qZA()()}if(2&i){const t=l.row,n=e.oxw();e.Q6J("href",n.getLink(t),e.LSH)}}function qe(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",29)(1,"div",30)(2,"div",6)(3,"div",19)(4,"div",31),e._UZ(5,"img",32),e.qZA(),e.TgZ(6,"div",33),e._uU(7," G\xf6nderen \xdcye: "),e.TgZ(8,"b",34),e._uU(9),e.qZA(),e._UZ(10,"br"),e._uU(11," Al\u0131c\u0131: "),e.TgZ(12,"b",34),e._uU(13),e.qZA(),e.TgZ(14,"p"),e._uU(15),e.qZA()()()(),e.TgZ(16,"div",35)(17,"a",22),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().openInNewTab(a)}),e.TgZ(18,"span",23),e._UZ(19,"i",24),e.qZA()(),e.TgZ(20,"a",27),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().openMessage(a)}),e.TgZ(21,"span",23),e._UZ(22,"i",28),e.qZA()(),e.TgZ(23,"button",25),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().delete(a)}),e.TgZ(24,"span",23),e._UZ(25,"i",26),e.qZA()()()()()}if(2&i){const t=l.$implicit;e.xp6(5),e.Q6J("src",t.image,e.LSH)("alt",t.name),e.xp6(4),e.hij(" ",null==t.user1?null:t.user1.name," "),e.xp6(4),e.hij(" ",null==t.user2?null:t.user2.name," "),e.xp6(2),e.Oqu(null==t.lastMessage?null:t.lastMessage.message)}}let Ne=(()=>{class i{constructor(t,n,s,a,o,r,u,m,b,T){this.fileUploadService=t,this.toastr=n,this.socket=s,this.messageService=a,this.route=o,this.chatService=r,this.cdRef=u,this.router=m,this.locationStrategy=b,this.userService=T,this.page=new w.T,this.isLoading=!1,this.dialogs=[],this.originalDialogs=[],this.page.pageNumber=0,this.pageNumber=1,this.page.size=20}ngOnInit(){this.getPageConfig(),this.chatService.subscribeToNewMessage(t=>{this.getPageConfig()}),setInterval(()=>{this.getPageConfig()},3e4)}getPageConfig(){this.userService.getDialogPage({key:this.searchText,limit:this.page.size,withPassive:!0,all:!0},t=>{this.isLoading=!1,this.page.totalElements=t.totalElements,this.page.totalPages=t.totalPages,this.setPage({offset:0})})}setPage(t){this.page.pageNumber=t.offset,this.getDialogs()}setPage2(t){this.setPage({offset:t})}getLink(t){return A.N.BASE_URL3+"#/message/chat/"+t._id}openMessage(t){var n=this;return(0,v.Z)(function*(){let s=t;const{value:a}=yield p().fire({title:"Cevap Yaz",input:"text",inputLabel:"Mesaj",inputPlaceholder:"",inputValidator:b=>b?null:"L\xfctfen Mesaj Girin!"});if(null==a)return;n.messageService.sendMessage({dialog:s._id,message:a,coinMessage:!1,systemMessage:!1},b=>{p().fire({title:"Mesaj G\xf6nderildi",icon:"success",timer:1e3,timerProgressBar:!0}),n.getPageConfig()})})()}openInNewTab(t){const n=document.createElement("a");n.setAttribute("href",A.N.BASE_URL3+"#/message/chat/"+t._id),n.click()}compareByCreatedAt(t,n){return t.createdAt<n.createdAt?-1:t.createdAt>n.createdAt?1:0}getDialogs(){this.messageService.dialogs({all:!0,fake:!0,limit:this.page.size,skip:this.page.size*this.page.pageNumber},n=>{this.originalDialogs=n,this.dialogs=n})}search(){this.dialogs=this.searchText?this.originalDialogs.filter(t=>{var n,s,a,o;return(null===(s=null===(n=null==t?void 0:t.user1)||void 0===n?void 0:n.name)||void 0===s?void 0:s.toLowerCase().includes(this.searchText.toLowerCase()))||(null===(o=null===(a=null==t?void 0:t.user2)||void 0===a?void 0:a.name)||void 0===o?void 0:o.toLowerCase().includes(this.searchText.toLowerCase()))}):this.originalDialogs}delete(t){p().fire({title:"Silme \u0130\u015flemi Onaylay\u0131n",text:"Bu g\xf6r\xfc\u015fme ve mesajlar silinecektir. Bu i\u015flem geri al\u0131namaz",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"\u0130\u015flemi Onayla",cancelButtonText:"Vazge\xe7"}).then(n=>{n.isConfirmed&&this.userService.delete("dialog",{_id:null==t?void 0:t._id},s=>{this.getDialogs()})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Z.J),e.Y36(C._W),e.Y36(x.sk),e.Y36(y.e),e.Y36(_.gz),e.Y36(M),e.Y36(e.sBO),e.Y36(_.F0),e.Y36(d.S$),e.Y36(k.K))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-history"]],decls:35,vars:36,consts:[[1,"d-flex","justify-content-between","align-items-center","flex-wrap","grid-margin"],[1,"mb-3","mb-md-0"],[1,"input-group","mb-3"],["type","text","placeholder","Ara...","aria-label","Ara","aria-describedby","button-addon2",1,"form-control",3,"ngModel","keyup.enter","ngModelChange"],["type","button","id","button-addon2",1,"btn","btn-outline-secondary",3,"click"],[1,"card","grid-margin","d-none","d-lg-block"],[1,"card-body"],[1,"table-responsive"],[1,"bootstrap","expandable",3,"headerHeight","columnMode","loadingIndicator","footerHeight","rowHeight","rows","count","offset","limit","externalPaging","scrollbarH","page"],["myTable",""],["name","Index",3,"width","resizeable","sortable","draggable","canAutoResize"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],["name","user1"],["name","user2"],["name","lastMessage"],["name","lastMessage",3,"sortable","comparator"],[3,"width","resizeable","sortable","draggable","canAutoResize"],[1,"d-md-block","d-lg-none"],[1,"row"],["class","col-12 col-sm-6 col-md-6 col-lg-6 stretch-card",4,"ngFor","ngForOf"],["target","_blank",3,"href"],["ngbTooltip","Detay",1,"btn","btn-icon","btn-light","m-2",3,"click"],[1,"btn-label"],[1,"feather","icon-mail"],["ngbTooltip","Sil",1,"btn","text-danger","btn-icon","btn-light","m-2",3,"click"],[1,"feather","icon-x"],["ngbTooltip","H\u0131zl\u0131 Cevap Yaz",1,"btn","btn-icon","btn-light","m-2",3,"click"],[1,"feather","icon-send"],[1,"col-12","col-sm-6","col-md-6","col-lg-6","stretch-card"],[1,"card","stretch-card","mb-3"],[1,"col-4","p-0"],["onerror","this.src='https://iili.io/JXcmTOl.png';",1,"card-img-top",2,"object-fit","cover",3,"src","alt"],[1,"col-8"],[1,"card-title"],[1,"card-footer","p-1"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"T\xfcm Mesajlar"),e.qZA()(),e.TgZ(3,"div",2)(4,"input",3),e.NdJ("keyup.enter",function(){return n.search()})("ngModelChange",function(a){return n.searchText=a}),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return n.search()}),e._uU(6," Ara "),e.qZA()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"ngx-datatable",8,9),e.NdJ("page",function(a){return n.setPage(a)}),e.TgZ(12,"ngx-datatable-column",10),e.YNc(13,be,2,0,"ng-template",11),e.YNc(14,Te,2,1,"ng-template",12),e.qZA(),e.TgZ(15,"ngx-datatable-column",13),e.YNc(16,Ze,2,0,"ng-template",11),e.YNc(17,Ce,1,1,"ng-template",12),e.qZA(),e.TgZ(18,"ngx-datatable-column",14),e.YNc(19,ve,2,0,"ng-template",11),e.YNc(20,xe,1,1,"ng-template",12),e.qZA(),e.TgZ(21,"ngx-datatable-column",15),e.YNc(22,Ae,2,0,"ng-template",11),e.YNc(23,ye,2,1,"ng-template",12),e.qZA(),e.TgZ(24,"ngx-datatable-column",16),e.YNc(25,ke,2,0,"ng-template",11),e.YNc(26,Me,2,4,"ng-template",12),e.qZA(),e.TgZ(27,"ngx-datatable-column",17),e.YNc(28,Ue,2,0,"ng-template",11),e.YNc(29,we,11,1,"ng-template",12),e.qZA()()()()(),e.TgZ(30,"div",18)(31,"div",19),e.YNc(32,qe,26,5,"div",20),e.qZA(),e.TgZ(33,"ngx-datatable",8,9),e.NdJ("page",function(a){return n.setPage(a)}),e.qZA()()),2&t&&(e.xp6(4),e.Q6J("ngModel",n.searchText),e.xp6(6),e.Q6J("headerHeight",50)("columnMode","force")("loadingIndicator",n.isLoading)("footerHeight",50)("rowHeight","auto")("rows",n.dialogs)("count",n.page.totalElements)("offset",n.page.pageNumber)("limit",n.page.size)("externalPaging",!0)("scrollbarH",!0),e.xp6(2),e.Q6J("width",60)("resizeable",!1)("sortable",!1)("draggable",!1)("canAutoResize",!1),e.xp6(12),e.Q6J("sortable",!0)("comparator",n.compareByCreatedAt),e.xp6(3),e.Q6J("width",200)("resizeable",!0)("sortable",!1)("draggable",!1)("canAutoResize",!0),e.xp6(5),e.Q6J("ngForOf",n.dialogs),e.xp6(1),e.Q6J("headerHeight",50)("columnMode","force")("loadingIndicator",n.isLoading)("footerHeight",50)("rowHeight","auto")("rows",n.dialogs)("count",n.page.totalElements)("offset",n.page.pageNumber)("limit",n.page.size)("externalPaging",!0)("scrollbarH",!0))},directives:[c.Fj,c.JJ,c.On,f.nE,f.UC,f.tk,f.vq,h._L,d.sg],pipes:[d.uU],styles:[""]}),i})();function De(i,l){1&i&&(e.TgZ(0,"span"),e._uU(1,"#"),e.qZA())}function Je(i,l){if(1&i&&(e.TgZ(0,"b"),e._uU(1),e.qZA()),2&i){const t=l.rowIndex;e.xp6(1),e.Oqu(t+1)}}function Le(i,l){1&i&&(e.TgZ(0,"span"),e._uU(1,"Mesaj"),e.qZA())}function He(i,l){1&i&&e._uU(0),2&i&&e.hij(" ",l.value," ")}function Se(i,l){1&i&&(e.TgZ(0,"span"),e._uU(1,"G\xf6nder"),e.qZA())}function Fe(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){const a=e.CHM(t).row;return e.oxw().sendToLast(a)}),e._uU(1," Son 10 \xdcyeye G\xf6nder "),e.qZA()}}function Ye(i,l){1&i&&(e.TgZ(0,"span"),e._uU(1,"G\xf6nder"),e.qZA())}function je(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){const a=e.CHM(t).row;return e.oxw().sendToLastFake(a)}),e._uU(1," Cevap Vermeyenlere G\xf6nder "),e.qZA()}}function ze(i,l){1&i&&(e.TgZ(0,"span"),e._uU(1,"\u0130\u015flem"),e.qZA())}const D=function(i){return["/message/edit-template",i]};function Be(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"a",22)(1,"span",23),e._UZ(2,"i",24),e.qZA()(),e.TgZ(3,"button",25),e.NdJ("click",function(){const a=e.CHM(t).row;return e.oxw().delete(a._id)}),e.TgZ(4,"span",23),e._UZ(5,"i",26),e.qZA()()}2&i&&e.Q6J("routerLink",e.VKq(1,D,l.row._id))}function Ee(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",27)(1,"div",28)(2,"div",8)(3,"div",18)(4,"div",29),e._UZ(5,"img",30),e.qZA(),e.TgZ(6,"div",31)(7,"b",32),e._uU(8),e.qZA(),e.TgZ(9,"p"),e._uU(10),e.qZA()()()(),e.TgZ(11,"div",33)(12,"a",22)(13,"span",23),e._UZ(14,"i",24),e.qZA()(),e.TgZ(15,"button",25),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().delete(a._id)}),e.TgZ(16,"span",23),e._UZ(17,"i",26),e.qZA()()()()()}if(2&i){const t=l.$implicit;e.xp6(5),e.Q6J("src",t.image,e.LSH)("alt",t.name),e.xp6(3),e.hij(" ",t.name," "),e.xp6(2),e.Oqu(t.desc),e.xp6(2),e.Q6J("routerLink",e.VKq(5,D,t._id))}}const Ie=function(){return["../add-template"]};let Oe=(()=>{class i{constructor(t,n,s,a,o,r,u,m,b,T){this.fileUploadService=t,this.toastr=n,this.socket=s,this.messageService=a,this.route=o,this.chatService=r,this.cdRef=u,this.router=m,this.locationStrategy=b,this.userService=T,this.page=new w.T,this.isLoading=!1,this.dialogs=[],this.originalDialogs=[],this.page.pageNumber=0,this.pageNumber=1,this.page.size=10}ngOnInit(){this.getPageConfig()}getPageConfig(){this.messageService.getTemplatesPage({key:this.searchText,limit:this.page.size,withPassive:!0},t=>{this.isLoading=!1,this.page.totalElements=t.totalElements,this.page.totalPages=t.totalPages,this.setPage({offset:0})})}setPage(t){this.page.pageNumber=t.offset,this.getDialogs()}setPage2(t){this.setPage({offset:t})}openInNewTab(t){const n=document.createElement("a");n.setAttribute("href",A.N.BASE_URL3+"#/message/chat/"+t._id),n.setAttribute("target","_blank"),n.setAttribute("rel","noopener noreferrer"),n.click()}compareByCreatedAt(t,n){return t.createdAt<n.createdAt?-1:t.createdAt>n.createdAt?1:0}getDialogs(){this.messageService.templates({fake:!0,limit:this.page.size,skip:this.page.size*this.page.pageNumber},n=>{this.originalDialogs=n,this.dialogs=n})}search(){this.dialogs=this.searchText?this.originalDialogs.filter(t=>{var n,s,a,o;return(null===(s=null===(n=null==t?void 0:t.user1)||void 0===n?void 0:n.name)||void 0===s?void 0:s.toLowerCase().includes(this.searchText.toLowerCase()))||(null===(o=null===(a=null==t?void 0:t.user2)||void 0===a?void 0:a.name)||void 0===o?void 0:o.toLowerCase().includes(this.searchText.toLowerCase()))}):this.originalDialogs}sendToLast(t){this.messageService.sendToLasts({text:t.message},n=>{this.toastr.success("Mesaj ba\u015far\u0131yla g\xf6nderilmi\u015ftir")})}sendToLastFake(t){this.messageService.replyMessages({text:t.message},n=>{this.toastr.success("Mesaj ba\u015far\u0131yla g\xf6nderilmi\u015ftir")})}delete(t){p().fire({title:"Silme \u0130\u015flemini Onaylay\u0131n",text:"Silme i\u015flemini l\xfctfen onaylay\u0131n. Bu i\u015flem geri al\u0131namaz",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"\u0130\u015flemi Onayla",cancelButtonText:"Vazge\xe7"}).then(n=>{n.isConfirmed&&this.userService.delete("template",{_id:t},s=>{p().fire({title:"Mesaj Silinmi\u015ftir",icon:"success",timer:2e3,timerProgressBar:!0}),this.setPage({offset:this.page.pageNumber})})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Z.J),e.Y36(C._W),e.Y36(x.sk),e.Y36(y.e),e.Y36(_.gz),e.Y36(M),e.Y36(e.sBO),e.Y36(_.F0),e.Y36(d.S$),e.Y36(k.K))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-listtemplate"]],decls:33,vars:25,consts:[[1,"d-flex","justify-content-between","align-items-center","flex-wrap","grid-margin"],[1,"mb-3","mb-md-0"],["type","submit",1,"btn","btn-success","btn-icon-text",3,"routerLink"],[1,"btn-icon-prepend","feather","icon-plus"],[1,"input-group","mb-3"],["type","text","placeholder","Ara...","aria-label","Ara","aria-describedby","button-addon2",1,"form-control",3,"ngModel","keyup.enter","ngModelChange"],["type","button","id","button-addon2",1,"btn","btn-outline-secondary",3,"click"],[1,"card","grid-margin","d-none","d-lg-block"],[1,"card-body"],[1,"table-responsive"],[1,"bootstrap","expandable",3,"headerHeight","columnMode","loadingIndicator","footerHeight","rowHeight","rows","count","offset","limit","externalPaging","scrollbarH","page"],["myTable",""],["name","Index",3,"width","resizeable","sortable","draggable","canAutoResize"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],["name","message"],[3,"width","resizeable","sortable","draggable","canAutoResize"],[1,"d-md-block","d-lg-none"],[1,"row"],["class","col-12 col-sm-6 col-md-6 col-lg-6 stretch-card",4,"ngFor","ngForOf"],["ngbTooltip","En son kay\u0131t olan 10 \xfcyeye rasgele daha \xf6nce sohbeti olmayan profilden g\xf6nderir.",1,"btn","btn-outline-primary",3,"click"],["ngbTooltip","Cevap vermeyen t\xfcm \xdcyelera sohbetteki profilden g\xf6nderir.",1,"btn","btn-outline-primary",3,"click"],["ngbTooltip","D\xfczenle",1,"btn","btn-icon","btn-light","m-2",3,"routerLink"],[1,"btn-label"],[1,"feather","icon-edit"],["ngbTooltip","Sil",1,"btn","text-danger","btn-icon","btn-light","m-2",3,"click"],[1,"feather","icon-x"],[1,"col-12","col-sm-6","col-md-6","col-lg-6","stretch-card"],[1,"card","stretch-card","mb-3"],[1,"col-4","p-0"],["onerror","this.src='https://iili.io/JXcmTOl.png';",1,"card-img-top",2,"object-fit","cover",3,"src","alt"],[1,"col-8"],[1,"card-title"],[1,"card-footer","p-1"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"Haz\u0131r Mesajlar"),e.qZA(),e.TgZ(3,"a",2),e._UZ(4,"i",3),e._uU(5," Yeni Haz\u0131r Mesaj Ekle "),e.qZA()(),e.TgZ(6,"div",4)(7,"input",5),e.NdJ("keyup.enter",function(){return n.search()})("ngModelChange",function(a){return n.searchText=a}),e.qZA(),e.TgZ(8,"button",6),e.NdJ("click",function(){return n.search()}),e._uU(9," Ara "),e.qZA()(),e.TgZ(10,"div",7)(11,"div",8)(12,"div",9)(13,"ngx-datatable",10,11),e.NdJ("page",function(a){return n.setPage(a)}),e.TgZ(15,"ngx-datatable-column",12),e.YNc(16,De,2,0,"ng-template",13),e.YNc(17,Je,2,1,"ng-template",14),e.qZA(),e.TgZ(18,"ngx-datatable-column",15),e.YNc(19,Le,2,0,"ng-template",13),e.YNc(20,He,1,1,"ng-template",14),e.qZA(),e.TgZ(21,"ngx-datatable-column",15),e.YNc(22,Se,2,0,"ng-template",13),e.YNc(23,Fe,2,0,"ng-template",14),e.qZA(),e.TgZ(24,"ngx-datatable-column",15),e.YNc(25,Ye,2,0,"ng-template",13),e.YNc(26,je,2,0,"ng-template",14),e.qZA(),e.TgZ(27,"ngx-datatable-column",16),e.YNc(28,ze,2,0,"ng-template",13),e.YNc(29,Be,6,3,"ng-template",14),e.qZA()()()()(),e.TgZ(30,"div",17)(31,"div",18),e.YNc(32,Ee,18,7,"div",19),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("routerLink",e.DdM(24,Ie)),e.xp6(4),e.Q6J("ngModel",n.searchText),e.xp6(6),e.Q6J("headerHeight",50)("columnMode","force")("loadingIndicator",n.isLoading)("footerHeight",50)("rowHeight","auto")("rows",n.dialogs)("count",n.page.totalElements)("offset",n.page.pageNumber)("limit",n.page.size)("externalPaging",!0)("scrollbarH",!0),e.xp6(2),e.Q6J("width",60)("resizeable",!1)("sortable",!1)("draggable",!1)("canAutoResize",!1),e.xp6(12),e.Q6J("width",200)("resizeable",!0)("sortable",!1)("draggable",!1)("canAutoResize",!0),e.xp6(5),e.Q6J("ngForOf",n.dialogs))},directives:[_.yS,c.Fj,c.JJ,c.On,f.nE,f.UC,f.tk,f.vq,h._L,d.sg],styles:[""]}),i})();var J=g(5242);function Pe(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",16),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return s.newSlider=!s.newSlider,s.slider={}}),e._UZ(1,"i",17),e._uU(2," Yeni Mesaj Ekleyin "),e.qZA()}}const Qe=function(){return["../templates"]},Ge=function(){return["../../templates"]},Ve=[{path:"",component:N,children:[{path:"",redirectTo:"dialogs",pathMatch:"full"},{path:"dialogs",component:N}]},{path:"add-template",component:(()=>{class i{constructor(t,n,s){this.sliderService=t,this.fuService=n,this.toastr=s,this.slider={},this.newSlider=!1}ngOnInit(){}add(){var t=this;return(0,v.Z)(function*(){t.sliderService.addTemplate(t.slider,n=>{n&&(t.newSlider=!0,t.toastr.success("Mesaj Ekleme Ba\u015far\u0131l\u0131"))})})()}imageChanged(t){this.image=t.target.files}uploadImage(){return new Promise((t,n)=>{this.fuService.upload(this.image,{module:"image"},s=>{var a;(null===(a=null==s?void 0:s.urls)||void 0===a?void 0:a.length)?t(s.urls[0].url):n(null)})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(J.i),e.Y36(Z.J),e.Y36(C._W))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-create"]],decls:21,vars:5,consts:[[1,"d-flex","justify-content-between","align-items-center","flex-wrap","grid-margin"],[1,"mb-3","mb-md-0"],["placement","bottom","ngbTooltip","Geri D\xf6n",1,"btn","btn-link","btn-icon",3,"routerLink"],[1,"feather","icon-arrow-left"],[1,"card","grid-margin"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-md-6","col-sm-12"],[1,"form-group","mb-3"],[1,"form-label"],["type","text","placeholder","Mesaj","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"card-footer","d-flex","gap-2"],["type","submit",1,"btn","btn-success","btn-icon-text",3,"disabled","click"],[1,"btn-icon-prepend","feather","icon-save"],["type","button","class","btn btn-primary btn-icon-text",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary","btn-icon-text",3,"click"],[1,"btn-icon-prepend","feather","icon-plus"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div")(2,"h4",1)(3,"a",2),e._UZ(4,"i",3),e.qZA(),e._uU(5," Haz\u0131r Mesaj "),e.qZA()()(),e.TgZ(6,"div",4)(7,"div",5),e._uU(8,"Mesaj Ekle"),e.qZA(),e.TgZ(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9)(13,"label",10),e._uU(14,"Mesaj"),e.qZA(),e.TgZ(15,"input",11),e.NdJ("ngModelChange",function(a){return n.slider.message=a}),e.qZA()()()()(),e.TgZ(16,"div",12)(17,"button",13),e.NdJ("click",function(){return n.add()}),e._UZ(18,"i",14),e._uU(19," Kaydet "),e.qZA(),e.YNc(20,Pe,3,0,"button",15),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("routerLink",e.DdM(4,Qe)),e.xp6(12),e.Q6J("ngModel",n.slider.message),e.xp6(2),e.Q6J("disabled",n.newSlider),e.xp6(3),e.Q6J("ngIf",n.newSlider))},directives:[_.yS,h._L,c.Fj,c.Q7,c.JJ,c.On,d.O5],styles:[""]}),i})()},{path:"history",component:Ne},{path:"edit-template/:id",component:(()=>{class i{constructor(t,n,s,a){this.route=t,this.sliderService=n,this.fuService=s,this.toastr=a,this.slider={},this.newSlider=!1}ngOnInit(){this.route.params.subscribe(t=>{this.routerId=t.id||0,this.getSlider()})}getSlider(){this.sliderService.getTemplate({_id:this.routerId},t=>{this.slider=t})}add(){var t=this;return(0,v.Z)(function*(){t.newSlider=!0,t.sliderService.updateTemplate(t.slider,n=>{n&&(t.toastr.success("G\xfcncelleme Ba\u015far\u0131l\u0131"),t.newSlider=!1)})})()}imageChanged(t){this.image=t.target.files}uploadImage(){return new Promise((t,n)=>{this.fuService.upload(this.image,{module:"image"},s=>{var a;(null===(a=null==s?void 0:s.urls)||void 0===a?void 0:a.length)?t(s.urls[0].url):n(null)})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_.gz),e.Y36(J.i),e.Y36(Z.J),e.Y36(C._W))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-edit"]],decls:20,vars:4,consts:[[1,"d-flex","justify-content-between","align-items-center","flex-wrap","grid-margin"],[1,"mb-3","mb-md-0"],["placement","bottom","ngbTooltip","Geri D\xf6n",1,"btn","btn-link","btn-icon",3,"routerLink"],[1,"feather","icon-arrow-left"],[1,"card","grid-margin"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-md-6","col-sm-12"],[1,"form-group","mb-3"],[1,"form-label"],["type","text","placeholder","Mesaj","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"card-footer","d-flex","gap-2"],["type","submit",1,"btn","btn-success","btn-icon-text",3,"disabled","click"],[1,"btn-icon-prepend","feather","icon-save"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div")(2,"h4",1)(3,"a",2),e._UZ(4,"i",3),e.qZA(),e._uU(5," Haz\u0131r Mesaj "),e.qZA()()(),e.TgZ(6,"div",4)(7,"div",5),e._uU(8,"Mesaj D\xfczenle"),e.qZA(),e.TgZ(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9)(13,"label",10),e._uU(14,"Mesaj"),e.qZA(),e.TgZ(15,"input",11),e.NdJ("ngModelChange",function(a){return n.slider.message=a}),e.qZA()()()()(),e.TgZ(16,"div",12)(17,"button",13),e.NdJ("click",function(){return n.add()}),e._UZ(18,"i",14),e._uU(19," Kaydet "),e.qZA()()()),2&t&&(e.xp6(3),e.Q6J("routerLink",e.DdM(3,Ge)),e.xp6(12),e.Q6J("ngModel",n.slider.message),e.xp6(2),e.Q6J("disabled",n.newSlider))},directives:[_.yS,h._L,c.Fj,c.Q7,c.JJ,c.On],styles:[""]}),i})()},{path:"chat/:id",component:se,children:[]},{path:"templates",component:Oe,children:[]}];let Ke=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[_.Bz.forChild(Ve)],_.Bz]}),i})();const $e={suppressScrollX:!0};let Xe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[{provide:U.op,useValue:$e}],imports:[[d.ez,Ke,f.xD,h.IJ,c.u5,U.Xd]]}),i})()}}]);